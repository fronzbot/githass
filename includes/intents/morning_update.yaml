# Get morning summary
# Updated on:
#  - Weather
#  - (expected maiL??)
#  - Network uptime
#  - SSL cert expiry

MorningUpdate:
  speech:
    text: |
      {% if (now().strftime("%H") | int < 12) %}
        Good Morning!
      {% elif (now().strftime("%H") | int < 17) %}
        Good Afternoon!
      {% else %}
        Good Evening!
      {% endif %}
      Here is the forcast for the next twenty-four hours.
      {{ states.sensor.pws_weather_1d.state }} with a high of {{ states.sensor.pws_temp_high_1d_f.state }} and a low of {{ states.sensor.pws_temp_high_1d_f.state }}.
      Current conditions are {{ states.sensor.pws_weather.state }} and {{ states.sensor.pws_temp_f.state }} degrees
      {% if (states.sensor.pws_feelslike_f.state | int > states.sensor.pws_temp_f.state | int + 2) or (states.sensor.pws_feelslike_f.state | int < states.sensor.pws_temp_f.state | int - 2) %}
        Although it feels like it's actually {{ states.sensor.pws_feelslike_f.state | int }} degrees.
      {% endif %}
      {% if states.sensor.pws_weather.state == 'Rain' or states.sensor.pws_weather.state == 'Snow' %}
        Total forecasted precipitation is {{ states.sensor.pws_1d_in.state }} inches.
      {% endif %}
      On the technical side of things,
      The network has been up for the past {{ states.sensor.wifi_uptime.state | int }} days.
      Pi-hole is blocking {{ states.sensor.pihole_ads_percentage_blocked_today.state | int }} percent of DNS queries.
      Our SSL certificate is has {{ states.sensor.ssl_cert_expiry.state }} days until we need to renew.
